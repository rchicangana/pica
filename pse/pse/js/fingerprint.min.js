var Aes,configuration,semaphore,successCallback,errorCallback,successGenerateToken;(function(){function t(n){this.message=n}var n=typeof exports!="undefined"?exports:this,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";t.prototype=new Error;t.prototype.name="InvalidCharacterError";n.btoa||(n.btoa=function(n){for(var e=String(n),u,f,r=0,o=i,s="";e.charAt(r|0)||(o="=",r%1);s+=o.charAt(63&u>>8-r%1*8)){if(f=e.charCodeAt(r+=3/4),f>255)throw new t("'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.");u=u<<8|f}return s});n.atob||(n.atob=function(n){var e=String(n).replace(/=+$/,"");if(e.length%4==1)throw new t("'atob' failed: The string to be decoded is not correctly encoded.");for(var u=0,f,r,s=0,o="";r=e.charAt(s++);~r&&(f=u%4?f*64+r:r,u++%4)?o+=String.fromCharCode(255&f>>(-2*u&6)):0)r=i.indexOf(r);return o})})();Aes={};Aes.cipher=function(n,t){for(var f,e,r=4,o=t.length/r-1,i=[[],[],[],[]],u=0;u<4*r;u++)i[u%4][Math.floor(u/4)]=n[u];for(i=Aes.addRoundKey(i,t,0,r),f=1;f<o;f++)i=Aes.subBytes(i,r),i=Aes.shiftRows(i,r),i=Aes.mixColumns(i,r),i=Aes.addRoundKey(i,t,f,r);for(i=Aes.subBytes(i,r),i=Aes.shiftRows(i,r),i=Aes.addRoundKey(i,t,o,r),e=new Array(4*r),u=0;u<4*r;u++)e[u]=i[u%4][Math.floor(u/4)];return e};Aes.keyExpansion=function(n){for(var s,i,e=4,r=n.length/4,o=r+6,f=new Array(e*(o+1)),u=new Array(4),t=0;t<r;t++)s=[n[4*t],n[4*t+1],n[4*t+2],n[4*t+3]],f[t]=s;for(t=r;t<e*(o+1);t++){for(f[t]=new Array(4),i=0;i<4;i++)u[i]=f[t-1][i];if(t%r==0)for(u=Aes.subWord(Aes.rotWord(u)),i=0;i<4;i++)u[i]^=Aes.rCon[t/r][i];else r>6&&t%r==4&&(u=Aes.subWord(u));for(i=0;i<4;i++)f[t][i]=f[t-r][i]^u[i]}return f};Aes.subBytes=function(n,t){for(var r,i=0;i<4;i++)for(r=0;r<t;r++)n[i][r]=Aes.sBox[n[i][r]];return n};Aes.shiftRows=function(n,t){for(var i,u=new Array(4),r=1;r<4;r++){for(i=0;i<4;i++)u[i]=n[r][(i+r)%t];for(i=0;i<4;i++)n[r][i]=u[i]}return n};Aes.mixColumns=function(n){for(var t,r,u,i=0;i<4;i++){for(t=new Array(4),r=new Array(4),u=0;u<4;u++)t[u]=n[u][i],r[u]=n[u][i]&128?n[u][i]<<1^283:n[u][i]<<1;n[0][i]=r[0]^t[1]^r[1]^t[2]^t[3];n[1][i]=t[0]^r[1]^t[2]^r[2]^t[3];n[2][i]=t[0]^t[1]^r[2]^t[3]^r[3];n[3][i]=t[0]^r[0]^t[1]^t[2]^r[3]}return n};Aes.addRoundKey=function(n,t,i,r){for(var f,u=0;u<4;u++)for(f=0;f<r;f++)n[u][f]^=t[i*4+f][u];return n};Aes.subWord=function(n){for(var t=0;t<4;t++)n[t]=Aes.sBox[n[t]];return n};Aes.rotWord=function(n){for(var i=n[0],t=0;t<3;t++)n[t]=n[t+1];return n[3]=i,n};Aes.sBox=[99,124,119,123,242,107,111,197,48,1,103,43,254,215,171,118,202,130,201,125,250,89,71,240,173,212,162,175,156,164,114,192,183,253,147,38,54,63,247,204,52,165,229,241,113,216,49,21,4,199,35,195,24,150,5,154,7,18,128,226,235,39,178,117,9,131,44,26,27,110,90,160,82,59,214,179,41,227,47,132,83,209,0,237,32,252,177,91,106,203,190,57,74,76,88,207,208,239,170,251,67,77,51,133,69,249,2,127,80,60,159,168,81,163,64,143,146,157,56,245,188,182,218,33,16,255,243,210,205,12,19,236,95,151,68,23,196,167,126,61,100,93,25,115,96,129,79,220,34,42,144,136,70,238,184,20,222,94,11,219,224,50,58,10,73,6,36,92,194,211,172,98,145,149,228,121,231,200,55,109,141,213,78,169,108,86,244,234,101,122,174,8,186,120,37,46,28,166,180,198,232,221,116,31,75,189,139,138,112,62,181,102,72,3,246,14,97,53,87,185,134,193,29,158,225,248,152,17,105,217,142,148,155,30,135,233,206,85,40,223,140,161,137,13,191,230,66,104,65,153,45,15,176,84,187,22];Aes.rCon=[[0,0,0,0],[1,0,0,0],[2,0,0,0],[4,0,0,0],[8,0,0,0],[16,0,0,0],[32,0,0,0],[64,0,0,0],[128,0,0,0],[27,0,0,0],[54,0,0,0]];typeof module!="undefined"&&module.exports&&(module.exports=Aes);typeof define=="function"&&define.amd&&define([],function(){return Aes});typeof module!="undefined"&&module.exports&&(Aes=require("./aes"));Aes.Ctr={};Aes.Ctr.encrypt=function(n,t,i){var o=16,h,c,s,a,f,u,r,b;if(!(i==128||i==192||i==256))return"";for(n=String(n).utf8Encode(),t=String(t).utf8Encode(),h=i/8,c=new Array(h),r=0;r<h;r++)c[r]=isNaN(t.charCodeAt(r))?0:t.charCodeAt(r);s=Aes.cipher(c,Aes.keyExpansion(c));s=s.concat(s.slice(0,h-16));var e=new Array(o),y=(new Date).getTime(),k=y%1e3,d=Math.floor(y/1e3),g=Math.floor(Math.random()*65535);for(r=0;r<2;r++)e[r]=k>>>r*8&255;for(r=0;r<2;r++)e[r+2]=g>>>r*8&255;for(r=0;r<4;r++)e[r+4]=d>>>r*8&255;for(a="",r=0;r<8;r++)a+=String.fromCharCode(e[r]);var nt=Aes.keyExpansion(s),v=Math.ceil(n.length/o),p=new Array(v);for(f=0;f<v;f++){for(u=0;u<4;u++)e[15-u]=f>>>u*8&255;for(u=0;u<4;u++)e[11-u]=f/4294967296>>>u*8;var tt=Aes.cipher(e,nt),w=f<v-1?o:(n.length-1)%o+1,l=new Array(w);for(r=0;r<w;r++)l[r]=tt[r]^n.charCodeAt(f*o+r),l[r]=String.fromCharCode(l[r]);p[f]=l.join("")}return b=a+p.join(""),b.base64Encode()};Aes.Ctr.decrypt=function(n,t,i){var h=16,c,l,e,o,y,v,u,f,w,s,r,b;if(!(i==128||i==192||i==256))return"";for(n=String(n).base64Decode(),t=String(t).utf8Encode(),c=i/8,l=new Array(c),r=0;r<c;r++)l[r]=isNaN(t.charCodeAt(r))?0:t.charCodeAt(r);for(e=Aes.cipher(l,Aes.keyExpansion(l)),e=e.concat(e.slice(0,c-16)),o=new Array(8),y=n.slice(0,8),r=0;r<8;r++)o[r]=y.charCodeAt(r);var k=Aes.keyExpansion(e),a=Math.ceil((n.length-8)/h),p=new Array(a);for(u=0;u<a;u++)p[u]=n.slice(8+u*h,8+u*h+h);for(n=p,v=new Array(n.length),u=0;u<a;u++){for(f=0;f<4;f++)o[15-f]=u>>>f*8&255;for(f=0;f<4;f++)o[11-f]=(u+1)/4294967296-1>>>f*8&255;for(w=Aes.cipher(o,k),s=new Array(n[u].length),r=0;r<n[u].length;r++)s[r]=w[r]^n[u].charCodeAt(r),s[r]=String.fromCharCode(s[r]);v[u]=s.join("")}return b=v.join(""),b.utf8Decode()};typeof String.prototype.utf8Encode=="undefined"&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))});typeof String.prototype.utf8Decode=="undefined"&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(n){return this}});typeof String.prototype.base64Encode=="undefined"&&(String.prototype.base64Encode=function(){if(typeof btoa!="undefined")return btoa(this);if(typeof Buffer!="undefined")return new Buffer(this,"utf8").toString("base64");throw new Error("No Base64 Encode");});typeof String.prototype.base64Decode=="undefined"&&(String.prototype.base64Decode=function(){if(typeof atob!="undefined")return atob(this);if(typeof Buffer!="undefined")return new Buffer(this,"base64").toString("utf8");throw new Error("No Base64 Decode");});typeof module!="undefined"&&module.exports&&(module.exports=Aes.Ctr);typeof define=="function"&&define.amd&&define(["Aes"],function(){return Aes.Ctr});configuration={getIdentityStringLength:2e3,removeAttrList:[{type:"array",parent:"NavigatorPluginList",name:"Filename"},{type:"attr",parent:"JSData",name:"Vendor"},{type:"attr",parent:"JSData",name:"ProductSub"},{type:"attr",parent:"JSData",name:"Product"},{type:"attr",parent:"JSData",name:"BuildID"},{type:"array",parent:"NavigatorPluginList",name:"Description"},{type:"attr",parent:"Summary",name:"Client_Timestamp"}],unhashableAttrList:[{type:"attr",parent:"Summary",name:"Client_Timestamp"},{type:"attr",parent:"Summary",name:"Host"}],encryptedAttrList:[{type:"attr",parent:"Summary",name:"IP"},{type:"attr",parent:"Summary",name:"Screen_Resolution"},{type:"attr",parent:"Geolocation",name:"Country"},{type:"attr",parent:"Geolocation",name:"City"},{type:"attr",parent:"Geolocation",name:"Latitude"},{type:"attr",parent:"Geolocation",name:"Longitude"},{type:"attr",parent:"Geolocation",name:"Region"},{type:"attr",parent:"Geolocation",name:"Time_Zone"},{type:"attr",parent:"Geolocation",name:"ISP"}],saveOnStorage:!1,useAllGeoApis:!1,desirablePlugins:3,useToken:!1,tokenUrl:"http://localhost:49756/api/tokens/generate",timeout:5e3,useSemaphore:!1,silentMode:!0};semaphore=!1;typeof String.prototype.utf8Encode=="undefined"&&(String.prototype.utf8Encode=function(){return unescape(encodeURIComponent(this))});typeof String.prototype.utf8Decode=="undefined"&&(String.prototype.utf8Decode=function(){try{return decodeURIComponent(escape(this))}catch(n){return this}});var timeStamp=new Date,z="DKKLSWSF098L903K",fingerprint=function(){var t=function(){var n=function(n,t){return t>>>n|t<<32-n},i=function(t){return n(2,t)^n(13,t)^n(22,t)},r=function(t){return n(6,t)^n(11,t)^n(25,t)},u=function(t){return n(7,t)^n(18,t)^t>>>3},f=function(t){return n(17,t)^n(19,t)^t>>>10},e=function(n,t,i){return n&t^~n&i},o=function(n,t,i){return n&t^n&i^t&i},t=function(n){for(var i="",r,t=7;t>=0;t--)r=n>>>t*4&15,i+=r.toString(16);return i},s=function(n){var rt,s,l,a,p,b,k,nt,w,d,g,tt,c,h,it,ut;n=n.utf8Encode();rt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];s=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];n+=String.fromCharCode(128);var ft=n.length/4+2,v=Math.ceil(ft/16),y=new Array(v);for(c=0;c<v;c++)for(y[c]=new Array(16),l=0;l<16;l++)y[c][l]=n.charCodeAt(c*64+l*4)<<24|n.charCodeAt(c*64+l*4+1)<<16|n.charCodeAt(c*64+l*4+2)<<8|n.charCodeAt(c*64+l*4+3);for(y[v-1][14]=(n.length-1)*8/Math.pow(2,32),y[v-1][14]=Math.floor(y[v-1][14]),y[v-1][15]=(n.length-1)*8&4294967295,a=new Array(64),c=0;c<v;c++){for(h=0;h<16;h++)a[h]=y[c][h];for(h=16;h<64;h++)a[h]=f(a[h-2])+a[h-7]+u(a[h-15])+a[h-16]&4294967295;for(p=s[0],b=s[1],k=s[2],nt=s[3],w=s[4],d=s[5],g=s[6],tt=s[7],h=0;h<64;h++)it=tt+r(w)+e(w,d,g)+rt[h]+a[h],ut=i(p)+o(p,b,k),tt=g,g=d,d=w,w=nt+it&4294967295,nt=k,k=b,b=p,p=it+ut&4294967295;s[0]=s[0]+p&4294967295;s[1]=s[1]+b&4294967295;s[2]=s[2]+k&4294967295;s[3]=s[3]+nt&4294967295;s[4]=s[4]+w&4294967295;s[5]=s[5]+d&4294967295;s[6]=s[6]+g&4294967295;s[7]=s[7]+tt&4294967295}return t(s[0])+t(s[1])+t(s[2])+t(s[3])+t(s[4])+t(s[5])+t(s[6])+t(s[7])};return{hashing:s}}(),r=function(){var n;if(window.XDomainRequest)n=new window.XDomainRequest;else if(window.XMLHttpRequest)n=new window.XMLHttpRequest;else try{n=ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(t){return null}return n},f=function(n,t,i){function f(n,t){return n===""&&t!==""?t:n}function l(){try{configuration.useSemaphore&&(!configuration.useSemaphore||semaphore)?typeof i!="undefined"&&i!==null&&(configuration.silentMode?i(n):i({error:"An active request is opened",data:n})):(semaphore=!0,o=r(),o.onload=v,o.onerror=a,o.open("GET",c[s]),o.onprogress=function(){},o.ontimeout=y,o.timeout=configuration.timeout,o.send())}catch(t){typeof i!="undefined"&&i!==null&&(configuration.silentMode?i(n):i({error:"An active request is opened",data:n}))}}var o,c=["https://pro.ip-api.com/json/?key=9vyxHBWPNcCvN7I","http://www.telize.com/geoip","http://freegeoip.net/json/"],e,s=0,h="",u={Continent:"",Country:"",Region:"",City:"",Time_Zone:"",ISP:"",Latitude:"",Longitude:""},a=function(t){semaphore=!1;s++;n.Summary.IP="";n.Geolocation=u;configuration.useAllGeoApis?s<c.length?l():typeof i!="undefined"&&i!==null&&(configuration.silentMode?i(n):i({error:"Something went wrong where trying to get Geo info",data:t})):n.Geolocation===undefined&&s<c.length?l():typeof i!="undefined"&&i!==null&&(configuration.silentMode?i(n):i({error:"Something went wrong where trying to get Geo info",data:t}))},v=function(){if(semaphore=!1,o.readyState===4&&o.status===200||window.XDomainRequest){if(typeof o.responseText!==undefined&&o.responseText!==""){e=JSON.parse(o.responseText);switch(s){case 0:u.Continent=f(u.Continent,"");u.Country=f(u.Country,e.country);u.Region=f(u.Region,e.region);u.City=f(u.City,e.city);u.Time_Zone=f(u.Time_Zone,e.timezone);u.ISP=f(u.ISP,e.org);u.Latitude=f(u.Latitude,e.lat);u.Longitude=f(u.Longitude,e.lon);h=f(h,e.query);break;case 1:u.Continent=f(u.Continent,e.continent_code);u.Country=f(u.Country,e.country);u.Region=f(u.Region,"");u.City=f(u.City,"");u.Time_Zone=f(u.Time_Zone,e.timezone);u.ISP=f(u.ISP,"");u.Latitude=f(u.Latitude,e.latitude);u.Longitude=f(u.Longitude,e.longitude);h=f(h,e.ip);break;case 2:u.Continent=f(u.Continent,"");u.Country=f(u.Country,e.country_name);u.Region=f(u.Region,e.region_code);u.City=f(u.City,e.city);u.Time_Zone=f(u.Time_Zone,e.time_zone);u.ISP=f(u.ISP,"");u.Latitude=f(u.Latitude,e.latitude);u.Longitude=f(u.Longitude,e.longitude);h=f(e.ip)}h=Aes.Ctr.encrypt(h,z,256);u.Country=Aes.Ctr.encrypt(u.Country,z,256);u.City=Aes.Ctr.encrypt(u.City,z,256);u.Latitude=Aes.Ctr.encrypt(u.Latitude,z,256);u.Longitude=Aes.Ctr.encrypt(u.Longitude,z,256);u.Region=Aes.Ctr.encrypt(u.Region,z,256);u.Time_Zone=Aes.Ctr.encrypt(u.Time_Zone,z,256);u.ISP=Aes.Ctr.encrypt(u.ISP,z,256);n.Summary.IP=h;n.Geolocation=u}s++;configuration.useAllGeoApis?s<c.length?l():typeof t!="undefined"&&t!==null&&t(n):n.Geolocation===undefined&&s<c.length?l():typeof t!="undefined"&&t!==null&&t(n)}},y=function(t){semaphore=!1;s++;n.Summary.IP="";n.Geolocation=u;configuration.useAllGeoApis?s<c.length?l():typeof i!="undefined"&&i!==null&&(configuration.silentMode?i(n):i({error:"Timeout is reached",data:t})):n.Geolocation===undefined&&s<c.length?l():typeof i!="undefined"&&i!==null&&(configuration.silentMode?i(n):i({error:"Timeout is reached",data:t}))};l()},e=function(n,t){var r={},i,u;for(r.Summary={Platform:navigator.platform,Screen_Resolution:Aes.Ctr.encrypt(screen.width+" x "+screen.height,z,256),Client_Timestamp:timeStamp,Host:window.location.href},r.JSData={UserAgent:navigator.userAgent,AppName:navigator.appName,AppCodeName:navigator.appCodeName,AppVersion:navigator.appVersion,BuildID:navigator.buildID,OSCPU:navigator.oscpu,Product:navigator.product,ProductSub:navigator.productSub,Vendor:navigator.vendor,Language:navigator.language,Java:navigator.javaEnabled(),Geolocation:navigator.geolocation===undefined?"false":"true",Cookies:navigator.cookieEnabled,WebStorage:window.localStorage===undefined?"false":"true"},r.NavigatorPluginList=[],i=0;i<navigator.plugins.length;i++)u={Name:navigator.plugins[i].name,Description:navigator.plugins[i].description.replace(/["]/g,"_"),Version:navigator.plugins[i].version===undefined?"":navigator.plugins[i].version,Filename:navigator.plugins[i].filename},r.NavigatorPluginList.push(u);r.FPD={Id:""};f(r,n,t)},u=function(r,u){var f=function(n){typeof r!="undefined"&&r!==null&&r(t.hashing(i(n)))},e=function(n){typeof r!="undefined"&&r!==null&&u(t.hashing(i(n)))};configuration.silentMode?n(f,e):n(f,u)},c=function(n){return t.hashing(i(n))},n=function(n,t){var i=function(t){var r=t,i=JSON.stringify(t),u,f=configuration.getIdentityStringLength-65,e,o;if(i.length>f)for(e=0;e<configuration.removeAttrList.length;e++){if(u=configuration.removeAttrList[e],u.type==="array")for(o=0;o<r[u.parent].length;o++){try{delete r[u.parent][o][u.name]}catch(s){}if(i=JSON.stringify(r),i.length<f)break}else if(u.type==="attr"){try{delete r[u.parent][u.name]}catch(s){}i=JSON.stringify(r)}if(i.length<f)break}if(i.length>f&&configuration.desirablePlugins>0)while(r.NavigatorPluginList.length>configuration.desirablePlugins)if(r.NavigatorPluginList.pop(),i=JSON.stringify(r),i.length<f)return i;typeof n!="undefined"&&n!==null&&n(i)},r=function(n){var r=n,i=JSON.stringify(n),u,f=configuration.getIdentityStringLength-65,e,o;if(i.length>f)for(e=0;e<configuration.removeAttrList.length;e++){if(u=configuration.removeAttrList[e],u.type==="array")for(o=0;o<r[u.parent].length;o++){try{delete r[u.parent][o][u.name]}catch(s){}if(i=JSON.stringify(r),i.length<f)break}else if(u.type==="attr"){try{delete r[u.parent][u.name]}catch(s){}i=JSON.stringify(r)}if(i.length<f)break}if(i.length>f&&configuration.desirablePlugins>0)while(r.NavigatorPluginList.length>configuration.desirablePlugins)if(r.NavigatorPluginList.pop(),i=JSON.stringify(r),i.length<f)return i;typeof t!="undefined"&&t!==null&&t(i)};configuration.silentMode?fingerprint.getIdentityJSON(i,r):fingerprint.getIdentityJSON(i,t)},i=function(n){for(var r,i=JSON.parse(n),f,t,u=0;u<configuration.unhashableAttrList.length;u++)if(t=configuration.unhashableAttrList[u],t.type==="array")for(r=0;r<i[t.parent].length;r++){try{delete i[t.parent][r][t.name]}catch(e){}f=JSON.stringify(i)}else if(t.type==="attr"){try{delete i[t.parent][t.name]}catch(e){}f=JSON.stringify(i)}for(u=0;u<configuration.encryptedAttrList.length;u++)if(t=configuration.encryptedAttrList[u],t.type==="array")for(r=0;r<i[t.parent].length;r++){try{i[t.parent][r][t.name]=Aes.Ctr.decrypt(i[t.parent][r][t.name],z,256)}catch(e){}f=JSON.stringify(i)}else if(t.type==="attr"){try{i[t.parent][t.name]=Aes.Ctr.decrypt(i[t.parent][t.name],z,256)}catch(e){}f=JSON.stringify(i)}return f},o=function(r,u){var f=function(n){if(typeof r!="undefined"&&r!==null){var u=t.hashing(i(n));r(n.replace(/"Id":""/g,'"Id":"'+u+'"'))}},s=function(n){if(typeof r!="undefined"&&u!==null){var f=t.hashing(i(n));u(n.replace(/"Id":""/g,'"Id":"'+f+'"'))}},e,o,h;if(configuration.saveOnStorage&&window.localStorage!=undefined)try{e=null;o=JSON.parse(sessionStorage.getItem("_agent"));o!=null&&(h=parseInt(o.timeStamp),timeStamp.getTime()-h<864e5&&(e=o.value));e==null?configuration.silentMode?n(f,s):n(f,u):typeof r!="undefined"&&r!==null&&r(e)}catch(c){configuration.silentMode?n(f,s):n(f,u)}else configuration.silentMode?n(f,s):n(f,u)},s=function(t,i){var f={fingerprint:null,identity:null},e=function(n){f.identity=n;var i=r(),u=function(){i.status===200&&typeof t!="undefined"&&t!==null&&t(i.responseText)};i.open("POST",configuration.tokenUrl);i.setRequestHeader("Content-type","application/json;charset=utf-8");i.setRequestHeader("Accept","application/json;charset=utf-8");i.onreadystatechange=u;i.send(JSON.stringify(f))},o=function(t){f.fingerprint=t;n(e,i)};u(o,i)},h=function(n,t){var u=!1,i,r,o;if(configuration.saveOnStorage&&configuration.useToken&&(i=sessionStorage.getItem("_tok"),i!=null&&typeof i!="undefined"&&i!="null")){var h=atob(i.split(".")[1]),f=JSON.parse(h),e=new Date(0);e.setUTCSeconds(new Number(f.exp));r=new Date(0);r.setUTCSeconds(new Number(f.nbf));console.log(e);console.log(r);new Date>r&&(u=!0)}return u||(o=function(t){configuration.saveOnStorage&&typeof t!="undefined"&&sessionStorage.setItem("_tok",JSON.parse(t).authctoken);n(t)},s(o,t)),i};return{getIdentityString:o,generateFingerprint:u,getIdentityJSON:e,generateToken:h}}();configuration.saveOnStorage&&window.localStorage!==undefined&&(successCallback=function(n){var t={value:n,timeStamp:timeStamp.getTime().toString()};sessionStorage.setItem("_agent",JSON.stringify(t))},errorCallback=function(n){console.log(n)},fingerprint.getIdentityString(successCallback,errorCallback),successGenerateToken=function(n){var t=n},configuration.useToken&&fingerprint.generateToken(successGenerateToken,errorCallback))
